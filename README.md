# Домашнее задание к занятию «Базы данных, их типы»

## Задание 1. СУБД

### Кейс

Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для каждой предметной области.

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему?

---

### 1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков. СУБД должна гарантировать целостность и чёткую структуру данных.

**Рекомендуемая СУБД:** *Реляционная (SQL)*  
**Пример реализации:** PostgreSQL, Oracle, Microsoft SQL Server

**Почему:**
- Финансовые данные требуют строгой структуры и высокой целостности.
- Поддержка ACID-транзакций — важный фактор для работы с бюджетами.
- Удобство аналитики через JOIN-ы, агрегатные функции и OLAP/OLTP.

---

### 1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы?

**API / технологии:**
- **OpenSSL API**
- **Intel IPP Crypto**
- **CUDA API (NVIDIA GPU)**
- **HSM (Hardware Security Module)**

**Интеграция:** Вынос операций хэширования из СУБД в отдельный сервис или использование хранимых процедур, вызывающих внешние API.

---

### 1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? СУБД должны быть гибкими и быстрыми.

**Рекомендуемая СУБД:** *NoSQL (документо-ориентированная)*  
**Пример реализации:** MongoDB, Couchbase

**Почему:**
- Гибкая структура данных — удобно собирать разнородные данные.
- Высокая скорость записи и чтения.
- Простота масштабирования.

---

### 1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

**Ответ:** Да, можно использовать **гибридную (multi-model) СУБД**.

**Примеры:**
- MongoDB
- Couchbase
- ArangoDB

**Как реализовать:**
- Для CRM — использовать коллекции документов.
- Для лендингов — динамические схемы и временные данные.
- Встроить ETL-процессы для аналитики внутри одного хранилища.

---

### 1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

**Рекомендуемая СУБД:** *Реляционная (SQL)* или *документо-ориентированная (NoSQL)*  
**Пример реализации:** PostgreSQL (JSONB), MongoDB

**Почему:**
- Чёткая иерархия и структура данных.
- Возможность полнотекстового поиска и гибких метаданных.

---

### 1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это реализовать?

**Ответ:** Да, можно использовать:
- **PostgreSQL** (уже подходила для задачи 1.1).
- **MongoDB** (если используется в CRM).

**Как реализовать:**
- Создать отдельную схему или коллекцию.
- Настроить индексацию и полнотекстовый поиск.
- Реализовать RBAC (управление доступом) по уровням структуры компании.

---

### 1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать со связями.

**Рекомендуемая СУБД:** *Графовая*  
**Пример реализации:** Neo4j, Amazon Neptune

**Почему:**
- Задачи маршрутизации идеально подходят для графовых моделей.
- Быстрый поиск кратчайших путей и связей между объектами.

---

### 1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД логистов?

**Ответ:** Да, особенно если используются multi-model решения.

**Вариант реализации:**
- **Neo4j + PostgreSQL**
- **ArangoDB**

**Преимущества:**
- Единая точка данных.
- Облегчается анализ взаимосвязей между поставками, маршрутами и поставщиками.

---

### 1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

**Ответ:** Да, можно использовать **multi-model СУБД**.

**Рекомендуемые СУБД:**
- ArangoDB
- CockroachDB
- Oracle Autonomous Database
- Azure Cosmos DB

**Почему:**
- Возможность работать с разными типами данных.
- Централизация управления и безопасности.
- Горизонтальное масштабирование и отказоустойчивость.

---

## Задание 2. Транзакции

### 2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы транзакция завершилась успешно. Ориентируйтесь на шесть действий.

**Шаги успешной транзакции:**
1. Пользователь выбирает способ пополнения и вводит сумму.
2. Система проверяет реквизиты платежного метода.
3. Происходит блокировка средств на стороне платёжного провайдера.
4. Система отправляет запрос на обновление баланса в СУБД в транзакции.
5. После подтверждения перевода, фиксируется новое значение баланса.
6. Отправляется уведомление пользователю о завершении операции.

---

### 2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

**Дополнительные шаги:**
1. Пользователь одобряет автоплатёж и сохраняет реквизиты.
2. Система создаёт регулярную задачу (cron, workflow).
3. При наступлении условия запускается автоматическая транзакция.
4. Все шаги из предыдущего пункта повторяются без участия пользователя.
5. Логируется каждая автоплатежная операция.
6. Предоставляется отчет или уведомление пользователю.

---

## Задание 3. SQL vs NoSQL

### 3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL.

1. **Поддержка ACID-транзакций**
2. **Чёткая схема данных (schema)**
3. **Развитые механизмы аналитики**
4. **Стандартность языка (SQL)**
5. **Интеграция с BI-системами**

---

### 3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

1. **Высокая производительность и горизонтальное масштабирование**
2. **Поддержка ACID и SQL**
3. **Автоматическое управление распределением данных**
4. **Поддержка HTAP (OLTP + OLAP)**
5. **Облачная и контейнерная готовность**

**Примеры NewSQL:** CockroachDB, TiDB, Google Spanner, YugabyteDB

---

## Задание 4. Кластеры

### Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин.

На основе какого критерия будете выбирать тип СУБД и какая модель распределённых вычислений здесь справится лучше всего и почему?

**Критерий выбора СУБД:**
- Масштабируемость
- Поддержка распределённых вычислений
- Надёжность и отказоустойчивость
- Упрощённое управление кластерами

**Рекомендуемая модель распределённых вычислений:**
- **Shared-nothing architecture**

**Рекомендуемая СУБД:**
- **Distributed SQL (NewSQL):** CockroachDB, YugabyteDB
- **Columnar storage + MPP:** Apache Spark + Delta Lake, ClickHouse
- **Big Data платформы:** Apache Hadoop, Apache Flink

**Почему:**
- Shared-nothing архитектура хорошо масштабируется на тысячи узлов.
- Распределённые SQL поддерживают ACID и SQL-запросы в условиях масштаба.
- Columnar storage эффективен для аналитики по большим данным.
- MPP позволяет выполнять вычисления параллельно по всем узлам.
